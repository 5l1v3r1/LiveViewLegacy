<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Live View: Rendering Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Live View
   &#160;<span id="projectnumber">v2.8</span>
   </div>
   <div id="projectbrief">Qt frontend GUI for cuda_take</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-slot-members">Public Slots</a>  </div>
  <div class="headertitle">
<div class="title">Rendering Functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-slot-members"></a>
Public Slots</h2></td></tr>
<tr class="memitem:gae1c220c6b7aa557feaa80d5fb02f904a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__renderfunc.html#gae1c220c6b7aa557feaa80d5fb02f904a">fft_widget::handleNewFrame</a> ()</td></tr>
<tr class="separator:gae1c220c6b7aa557feaa80d5fb02f904a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadba11cf8b60c455d857f8400fee7ca7d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__renderfunc.html#gadba11cf8b60c455d857f8400fee7ca7d">frameWorker::captureFrames</a> ()</td></tr>
<tr class="separator:gadba11cf8b60c455d857f8400fee7ca7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa85cabb8164a58ede6bd893d26599de0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__renderfunc.html#gaa85cabb8164a58ede6bd893d26599de0">frameview_widget::handleNewFrame</a> ()</td></tr>
<tr class="separator:gaa85cabb8164a58ede6bd893d26599de0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8167d1f53c918dc651e589cef592b359"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__renderfunc.html#ga8167d1f53c918dc651e589cef592b359">histogram_widget::handleNewFrame</a> ()</td></tr>
<tr class="separator:ga8167d1f53c918dc651e589cef592b359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44be841e46ac7a6f425ed5ae3eeb59b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__renderfunc.html#ga44be841e46ac7a6f425ed5ae3eeb59b1">profile_widget::handleNewFrame</a> ()</td></tr>
<tr class="separator:ga44be841e46ac7a6f425ed5ae3eeb59b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions which are responsible for the rendering of plots in a widget. </p>
<h2 class="groupheader">Public Slots</h2>
<a class="anchor" id="gadba11cf8b60c455d857f8400fee7ca7d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void frameWorker::captureFrames </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The backend communication with take object is handled for each frame in this loop. </p>
<p>First, all other events in the thread are completed, then the process sleeps for 50 microseconds to add wait time to the loop. The backend frame, workingFrame is incremented based on the framecount. The framecount indexes the cuda_take ring buffer data structure which contains 1500 arriving images from the camera link at a time. </p>
<p>the signals are handled as status ints. If the asynchronous processing takes longer than a single loop through the backend, it is skipped at the frontend. This prevents access to bad data by the plots. curFrames are therefore the frames which are used by the frontend. Additionally, the backend frame saving is communicated between Live View and cuda_take in this loop. </p><dl class="section author"><dt>Author</dt><dd>Noah Levy</dd></dl>

</div>
</div>
<a class="anchor" id="ga8167d1f53c918dc651e589cef592b359"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void histogram_widget::handleNewFrame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Render the bars of histogram data </p>
<p>As the histogram relies on standard deviation data, it must use the std_dev_frame rather than the curFrame. </p>

</div>
</div>
<a class="anchor" id="ga44be841e46ac7a6f425ed5ae3eeb59b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void profile_widget::handleNewFrame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Plots a specific dimension profile. </p>
<p>The y-axis data is reversed in these images. </p><dl class="section author"><dt>Author</dt><dd>JP Ryan</dd></dl>

</div>
</div>
<a class="anchor" id="gaa85cabb8164a58ede6bd893d26599de0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void frameview_widget::handleNewFrame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Rendering function for a frameview </p>
<p><a class="el" href="classframeview__widget.html">frameview_widget</a> plots a color map using data from the curFrame in the backend conditionally selected using the image_t. <a class="el" href="classframeWorker.html">frameWorker</a> contains a local copy of a frame from cuda_take with all processed data that can be read from directly. </p>
<p>For BASE type images, image_data_ptr is used, which has the type uint16_t (2 bytes/pixel). BASE images may display crosshairs, so we should check for the coordinates of these elements. Additionally, the image data is y-axis reversed, so our indexing should start from the top row, work left to right across a row, then down. </p>
<p>For DSF type images, dark_subtracted_data is used, which has the type float. DSF images may also display crosshairs. As with BASE images, the y-axis is reversed. </p>
<p>For STD_DEV type images, the current std_dev_frame in <a class="el" href="classframeWorker.html">frameWorker</a> is used rather than the curFrame. As calculating the standard deviation proceeds on the GPU regardless of CPU timing, the device must send back a signal whenever it has completed the most recent image. STD_DEV images will display at a lower framerate than other frameviews, especially on weaker graphics cards. They do not render crosshairs. </p><dl class="section author"><dt>Author</dt><dd>JP Ryan </dd>
<dd>
Noah Levy</dd></dl>

</div>
</div>
<a class="anchor" id="gae1c220c6b7aa557feaa80d5fb02f904a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fft_widget::handleNewFrame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Render a new frame of data from the backend </p>
<p>The nyquist frequency is determined based on the FFT type. The sampling rate is dependent on the pixels being sampled, hence the dimensions of the frame and the frame rate are used. Next, the bar graph bars are spaced according to the input vector length. Then the bars are plotted based on the fftMagnitudes inside the frame struct for the current frame in the buffer. </p><dl class="section author"><dt>Author</dt><dd>Noah Levy </dd>
<dd>
JP Ryan</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 27 2015 11:50:06 for Live View by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
